{"ast":null,"code":"import getNCheck from \"nth-check\";\nimport boolbase from \"boolbase\";\nfunction getChildFunc(next, adapter) {\n  return elem => {\n    const parent = adapter.getParent(elem);\n    return parent != null && adapter.isTag(parent) && next(elem);\n  };\n}\nexport const filters = {\n  contains(next, text, _ref) {\n    let {\n      adapter\n    } = _ref;\n    return function contains(elem) {\n      return next(elem) && adapter.getText(elem).includes(text);\n    };\n  },\n  icontains(next, text, _ref2) {\n    let {\n      adapter\n    } = _ref2;\n    const itext = text.toLowerCase();\n    return function icontains(elem) {\n      return next(elem) && adapter.getText(elem).toLowerCase().includes(itext);\n    };\n  },\n  // Location specific methods\n  \"nth-child\"(next, rule, _ref3) {\n    let {\n      adapter,\n      equals\n    } = _ref3;\n    const func = getNCheck(rule);\n    if (func === boolbase.falseFunc) return boolbase.falseFunc;\n    if (func === boolbase.trueFunc) return getChildFunc(next, adapter);\n    return function nthChild(elem) {\n      const siblings = adapter.getSiblings(elem);\n      let pos = 0;\n      for (let i = 0; i < siblings.length; i++) {\n        if (equals(elem, siblings[i])) break;\n        if (adapter.isTag(siblings[i])) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-child\"(next, rule, _ref4) {\n    let {\n      adapter,\n      equals\n    } = _ref4;\n    const func = getNCheck(rule);\n    if (func === boolbase.falseFunc) return boolbase.falseFunc;\n    if (func === boolbase.trueFunc) return getChildFunc(next, adapter);\n    return function nthLastChild(elem) {\n      const siblings = adapter.getSiblings(elem);\n      let pos = 0;\n      for (let i = siblings.length - 1; i >= 0; i--) {\n        if (equals(elem, siblings[i])) break;\n        if (adapter.isTag(siblings[i])) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-of-type\"(next, rule, _ref5) {\n    let {\n      adapter,\n      equals\n    } = _ref5;\n    const func = getNCheck(rule);\n    if (func === boolbase.falseFunc) return boolbase.falseFunc;\n    if (func === boolbase.trueFunc) return getChildFunc(next, adapter);\n    return function nthOfType(elem) {\n      const siblings = adapter.getSiblings(elem);\n      let pos = 0;\n      for (let i = 0; i < siblings.length; i++) {\n        const currentSibling = siblings[i];\n        if (equals(elem, currentSibling)) break;\n        if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === adapter.getName(elem)) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  \"nth-last-of-type\"(next, rule, _ref6) {\n    let {\n      adapter,\n      equals\n    } = _ref6;\n    const func = getNCheck(rule);\n    if (func === boolbase.falseFunc) return boolbase.falseFunc;\n    if (func === boolbase.trueFunc) return getChildFunc(next, adapter);\n    return function nthLastOfType(elem) {\n      const siblings = adapter.getSiblings(elem);\n      let pos = 0;\n      for (let i = siblings.length - 1; i >= 0; i--) {\n        const currentSibling = siblings[i];\n        if (equals(elem, currentSibling)) break;\n        if (adapter.isTag(currentSibling) && adapter.getName(currentSibling) === adapter.getName(elem)) {\n          pos++;\n        }\n      }\n      return func(pos) && next(elem);\n    };\n  },\n  // TODO determine the actual root element\n  root(next, _rule, _ref7) {\n    let {\n      adapter\n    } = _ref7;\n    return elem => {\n      const parent = adapter.getParent(elem);\n      return (parent == null || !adapter.isTag(parent)) && next(elem);\n    };\n  },\n  scope(next, rule, options, context) {\n    const {\n      equals\n    } = options;\n    if (!context || context.length === 0) {\n      // Equivalent to :root\n      return filters[\"root\"](next, rule, options);\n    }\n    if (context.length === 1) {\n      // NOTE: can't be unpacked, as :has uses this for side-effects\n      return elem => equals(context[0], elem) && next(elem);\n    }\n    return elem => context.includes(elem) && next(elem);\n  },\n  hover: dynamicStatePseudo(\"isHovered\"),\n  visited: dynamicStatePseudo(\"isVisited\"),\n  active: dynamicStatePseudo(\"isActive\")\n};\n/**\n * Dynamic state pseudos. These depend on optional Adapter methods.\n *\n * @param name The name of the adapter method to call.\n * @returns Pseudo for the `filters` object.\n */\nfunction dynamicStatePseudo(name) {\n  return function dynamicPseudo(next, _rule, _ref8) {\n    let {\n      adapter\n    } = _ref8;\n    const func = adapter[name];\n    if (typeof func !== \"function\") {\n      return boolbase.falseFunc;\n    }\n    return function active(elem) {\n      return func(elem) && next(elem);\n    };\n  };\n}","map":{"version":3,"names":["getNCheck","boolbase","getChildFunc","next","adapter","elem","parent","getParent","isTag","filters","contains","text","_ref","getText","includes","icontains","_ref2","itext","toLowerCase","nth-child","rule","_ref3","equals","func","falseFunc","trueFunc","nthChild","siblings","getSiblings","pos","i","length","nth-last-child","_ref4","nthLastChild","nth-of-type","_ref5","nthOfType","currentSibling","getName","nth-last-of-type","_ref6","nthLastOfType","root","_rule","_ref7","scope","options","context","hover","dynamicStatePseudo","visited","active","name","dynamicPseudo","_ref8"],"sources":["https://raw.githubusercontent.com/fb55/css-select/0f0725a9dfeddd2fdb54eda9656cdbab5bbf6be6/src/pseudo-selectors/filters.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}